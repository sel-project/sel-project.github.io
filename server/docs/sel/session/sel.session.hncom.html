<html><head>
        <!-- Generated by Ddoc from sel/session/hncom.d -->
        <META http-equiv="content-type" content="text/html; charset=utf-8">
        <title>sel.session.hncom</title>
        </head><body>
        <h1>sel.session.hncom</h1>
Hncom (hub-node communication) is the protocol used by SEL to
 exchange informations between the hub and the connected nodes.
<br><br>
<b>License:</b><br>
.

<br><br>
<b>Source:</b><br>
<br><br>

<dl><dt><big><a name="Node"></a>class <u>Node</u>: <u>sel.network.session.Session</u>;
</big></dt>
<dd>Session of a node. It's executed in a dedicated thread.<br><br>

<dl><dt><big><a name="Node.name"></a>shared const nothrow @nogc @property @safe string <u>name</u>();
</big></dt>
<dd>Gets the <u>name</u> of the node. The <u>name</u> is different for every node
 connected to hub and it should be used other nodes with
 the transfer function.<br><br>

</dd>
<dt><big><a name="Node.main"></a>shared const nothrow @nogc @property @safe bool <u>main</u>();
</big></dt>
<dd>Indicates whether or not this is a <u>main</u> node.
 A <u>main</u> node is able to receive players without the
 use of the transfer function.
 Every hub should have at least one <u>main</u> node, otherwise
 every player that tries to connect will be disconnected with
 the 'end of stream' message.<br><br>

</dd>
<dt><big><a name="Node.max"></a>shared const nothrow @nogc @property @safe uint <u>max</u>();
</big></dt>
<dd>Gets the highest number of players that can connect to the node.<br><br>

</dd>
<dt><big><a name="Node.online"></a>shared const nothrow @nogc @property @safe uint <u>online</u>();
</big></dt>
<dd>Gets the number of players connected to the node.<br><br>

</dd>
<dt><big><a name="Node.full"></a>shared const nothrow @nogc @property @safe bool <u>full</u>();
</big></dt>
<dd>Indicates whether the node is <u>full</u>.<br><br>

</dd>
<dt><big><a name="Node.latency"></a>shared const nothrow @nogc @property @safe uint <u>latency</u>();
</big></dt>
<dd>Gets the node's <u>latency</u> (it may not be precise).<br><br>

</dd>
<dt><big><a name="Node.tps"></a>shared const nothrow @nogc @property @safe float <u>tps</u>();
<br><a name="Node.ram"></a>shared const nothrow @nogc @property @safe ulong <u>ram</u>();
<br><a name="Node.cpu"></a>shared const nothrow @nogc @property @safe float <u>cpu</u>();
</big></dt>
<dd>Gets the node's usage, updated with the ResourcesUsage packet.<br><br>

</dd>
<dt><big><a name="Node.send"></a>shared ptrdiff_t <u>send</u>(const(void)[] <i>buffer</i>);
</big></dt>
<dd>Sends a <i>buffer</i> of data, prepending its length as a
 little endian 4-bytes unsigned integer.<br><br>

</dd>
<dt><big><a name="Node.sendTo"></a>shared void <u>sendTo</u>(shared PlayerSession <i>player</i>, ubyte[] <i>data</i>);
</big></dt>
<dd>Sends <i>data</i> to the node received from a <i>player</i>.<br><br>

</dd>
<dt><big><a name="Node.addNode"></a>shared void <u>addNode</u>(shared Node <i>node</i>);
</big></dt>
<dd>Notifies the <i>node</i> that another <i>node</i> has connected
 to the hub.<br><br>

</dd>
<dt><big><a name="Node.removeNode"></a>shared void <u>removeNode</u>(shared Node <i>node</i>);
</big></dt>
<dd>Notifies the <i>node</i> that another <i>node</i> has been
 disconnected from the hub.<br><br>

</dd>
<dt><big><a name="Node.sendMessage"></a>shared void <u>sendMessage</u>(uint <i>sender</i>, ubyte[] <i>payload</i>);
</big></dt>
<dd>Sends a message to the node.<br><br>

</dd>
<dt><big><a name="Node.updatePlayers"></a>shared void <u>updatePlayers</u>(inout uint <i>online</i>, inout uint <i>max</i>);
</big></dt>
<dd>Sends the number of <i>online</i> players and maximum number of
 players to the node.<br><br>

</dd>
<dt><big><a name="Node.remoteCommand"></a>shared void <u>remoteCommand</u>(string <i>command</i>, ubyte <i>origin</i>, Address <i>address</i>, int <i>commandId</i>);
</big></dt>
<dd>Executes a remote <i>command</i>.<br><br>

</dd>
<dt><big><a name="Node.reload"></a>shared void <u>reload</u>();
</big></dt>
<dd>Tells the node to <u>reload</u> its configurations.<br><br>

</dd>
<dt><big><a name="Node.addPlayer"></a>shared void <u>addPlayer</u>(shared PlayerSession <i>player</i>, ubyte <i>reason</i>);
</big></dt>
<dd>Adds a <i>player</i> to the node.
<br><br>
<b>Usage:</b><br>
(hub) adds <i>player</i> to the node's list
 (hub to node) send AddPlayer packet
 (node) adds <i>player</i> to its list<br><br>

</dd>
<dt><big><a name="Node.onPlayerTransferred"></a>shared void <u>onPlayerTransferred</u>(shared PlayerSession <i>player</i>);
</big></dt>
<dd>Called when a <i>player</i> is transferred by the hub (not by the node)
 to another node.<br><br>

</dd>
<dt><big><a name="Node.onPlayerLeft"></a>shared void <u>onPlayerLeft</u>(shared PlayerSession <i>player</i>);
</big></dt>
<dd>Called when a <i>player</i> lefts the server using the disconnect
 button or closing the socket.<br><br>

</dd>
<dt><big><a name="Node.onPlayerTimedOut"></a>shared void <u>onPlayerTimedOut</u>(shared PlayerSession <i>player</i>);
</big></dt>
<dd>Called when a <i>player</i> times out.<br><br>

</dd>
<dt><big><a name="Node.onPlayerKicked"></a>shared void <u>onPlayerKicked</u>(shared PlayerSession <i>player</i>);
</big></dt>
<dd>Called when a <i>player</i> is kicked (not by the node).<br><br>

</dd>
<dt><big><a name="Node.sendLatencyUpdate"></a>shared void <u>sendLatencyUpdate</u>(shared PlayerSession <i>player</i>);
</big></dt>
<dd>Updates a <i>player</i>'s latency (usually sent every 30 seconds).<br><br>

</dd>
<dt><big><a name="Node.sendPacketLossUpdate"></a>shared void <u>sendPacketLossUpdate</u>(shared PlayerSession <i>player</i>);
</big></dt>
<dd>Updates a <i>player</i>'s packet loss (usually sent every 30 seconds).<br><br>

</dd>
<dt><big><a name="Node.onClosed"></a>shared void <u>onClosed</u>(bool <i>transfer</i> = true);
</big></dt>
<dd>Called when the client closes the connection.
 Tries to <i>transfer</i> every connected player to the main node.<br><br>

</dd>
</dl>
</dd>
</dl>

        <hr><small>Page generated by <a href="http://dlang.org/ddoc.html">Ddoc</a>. </small>
        </body></html>
